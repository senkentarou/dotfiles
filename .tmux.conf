#
# Tmux Window settings
#

# Fundamentals
set -g default-shell "${SHELL}"
set -g default-command "${SHELL}"
set -g default-terminal 'screen-256color'
set -g terminal-overrides 'xterm:colors=256'

set -gq status-utf8 "on"
set -g history-limit 10000

# Indexing
setw -g mouse on
setw -g automatic-rename on
setw -g pane-base-index 1
set -g base-index 1
set -g renumber-windows on
set -g set-titles on
set -g focus-events on

# Timing
set -g escape-time 1
set -g repeat-time 1000

# Colors
set -g status-style bg=colour241,fg=colour255
setw -g window-status-style bg=default,fg=colour245
setw -g window-status-current-style bg=colour196,fg=colour255
set -g pane-border-style bg=default,fg=colour255
set -g pane-active-border-style bg=default,fg=colour50
set -g message-style bg=colour196,fg=colour255
set -g mode-style bg=cyan,fg=black

# Status Bar Style
set -g status-position top
set -g status-justify left
set -g status-interval 60
set -g status-left-length 100
set -g status-right-length 100
set -g status-right "#[fg=colour255,bg=colour241] (LA:#(uptime | rev | cut -d':' -f1 | rev | sed s/,//g )) #[default]"

#
# KeyBindings
#

# to set my prefix
unbind C-b
set -g prefix C-s
bind C-s send-prefix

# to reload tmux settings
bind C-r source-file ~/.tmux.conf \; display "Reloaded!"

# to operate window / pane
unbind n # disable next-window
unbind p # disable previous-window
unbind s # disable choose-tree

bind - split-window -v -c "#{pane_current_path}"
bind \\ split-window -h -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"
bind C new-session \; run-shell 'tmux rename-session "$(date +%Y-%m-%d_%H:%M:%S)"'

bind -n M-h if-shell 'test #{server_sessions} -eq 1' new-session 'switch-client -p'
bind -n M-j if-shell 'test #{server_sessions} -eq 1' new-session 'switch-client -n'
bind -n M-k if-shell 'test #{server_sessions} -eq 1' new-session 'switch-client -p'
bind -n M-l if-shell 'test #{server_sessions} -eq 1' new-session 'switch-client -n'

bind -r C-h previous-window
bind -r C-j select-pane -t :.+
bind -r C-k select-pane -t :.-
bind -r C-l next-window

bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind ';' choose-tree -w

bind -r H resize-pane -L 15
bind -r J resize-pane -D 15
bind -r K resize-pane -U 15
bind -r L resize-pane -R 15

# prefix + / to search in copy mode
bind / copy-mode \; send-keys ?

# to scroll terminal logs
setw -g mode-keys vi
bind m copy-mode
bind -Tcopy-mode-vi v send -X begin-selection
bind -Tcopy-mode-vi V send -X select-line
bind -Tcopy-mode-vi C-v send -X rectangle-toggle
bind -Tcopy-mode-vi y send -X copy-selection
bind -Tcopy-mode-vi Y send -X copy-line
